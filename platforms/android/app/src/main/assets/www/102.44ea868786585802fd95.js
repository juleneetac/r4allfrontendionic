(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"/yGZ":function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=function(){return function(){}}(),u=e("pMnS"),r=e("MKJQ"),i=e("jy/b"),a=e("gIcY"),s=e("mrSG"),d=e("uAme"),c=e("tgFJ"),g=e("MBq+"),p=e("PRZu"),f=e("25lC"),h=e("2Bap"),m=(e("lFSb"),function(){function n(n,l,e,t,o,u,r,i){this.usuarioService=n,this.torneoService=l,this.router=e,this.toastController=t,this.auth=o,this.storage=u,this.chatService=r,this.socket=i,this.chatService.setSocket(i)}return n.prototype.ngOnInit=function(){},n.prototype.goMain=function(){this.router.navigateByUrl("main")},n.prototype.goProfile=function(){this.router.navigateByUrl("profile")},n.prototype.loginUser=function(n){var l=this;n.preventDefault(),console.log(n);var e=new g.a(this.username,this.password);this.usuarioService.login(e).subscribe((function(n){return s.__awaiter(l,void 0,void 0,(function(){var l,e;return s.__generator(this,(function(t){switch(t.label){case 0:return[4,this.toastController.create({message:"Login correcto",position:"top",duration:1e3,color:"dark"})];case 1:return l=t.sent(),this.usuario=(e=n).usuario,this.usuario.jwt=e.jwt,console.log(this.usuario.username,this.usuario.mail,this.usuario.sexo),[4,this.storage.saveToken(this.usuario.jwt)];case 2:return t.sent(),[4,this.storage.saveUser(JSON.stringify(this.usuario))];case 3:return t.sent(),this.auth.loginLocal(),[4,this.goMain()];case 4:return t.sent(),this.chatService.connectSocket(this.username),[4,l.present()];case 5:return t.sent(),[2]}}))}))}),(function(n){console.log(n),l.handleError(n)}))},n.prototype.handleError=function(n){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(l){switch(l.label){case 0:return 500!=n.status?[3,3]:(console.log("entra"),[4,this.toastController.create({message:"Error",position:"bottom",duration:2e3})]);case 1:return[4,l.sent().present()];case 2:return l.sent(),[3,12];case 3:return 404!=n.status?[3,6]:(console.log("nose"),[4,this.toastController.create({message:"Usuario no existente",position:"bottom",duration:2e3})]);case 4:return[4,l.sent().present()];case 5:return l.sent(),[3,12];case 6:return 401!=n.status?[3,9]:(console.log("salida"),[4,this.toastController.create({message:"Unauthorized",position:"bottom",duration:2e3})]);case 7:return[4,l.sent().present()];case 8:return l.sent(),[3,12];case 9:return 402!=n.status?[3,12]:(console.log("mal password"),[4,this.toastController.create({message:"Incorrect password",position:"bottom",duration:2e3})]);case 10:return[4,l.sent().present()];case 11:l.sent(),l.label=12;case 12:return[2]}}))}))},n}()),b=e("ZYCi"),v=e("ytKu"),C=t["ɵcrt"]({encapsulation:0,styles:[[".ion-padding[_ngcontent-%COMP%]{--background:url('pista.5d3b663f1179c2477697.jpg') no-repeat center/cover fixed}ion-card-title[_ngcontent-%COMP%]{display:center;align-self:center;align-content:center;text-align:center;font-size:20px;margin-top:30px}#card[_ngcontent-%COMP%]{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}ion-input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border-radius:10px;background-color:#f3eec0;text-align:center;margin-top:-10px}#face[_ngcontent-%COMP%]{margin-top:15px}.loginface[_ngcontent-%COMP%]{background:#3b5998;color:#fff;height:43px;width:220px;text-align:right}#logo[_ngcontent-%COMP%]{color:#3b5998;size:40px;font-size:50px;display:-webkit-box;display:flex;z-index:1;border-width:5px;margin-top:-3px;margin-left:-7px}"]],data:{}});function R(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,11,"ion-header",[["translucent",""]],null,null,null,r.hb,r.r)),t["ɵdid"](1,49152,null,0,i.B,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{translucent:[0,"translucent"]},null),(n()(),t["ɵeld"](2,0,null,0,9,"ion-toolbar",[],null,null,null,r.Fb,r.P)),t["ɵdid"](3,49152,null,0,i.zb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,r.V,r.f)),t["ɵdid"](5,49152,null,0,i.l,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](6,0,null,0,2,"ion-back-button",[["defaultHref","/home"]],null,[[null,"click"]],(function(n,l,e){var o=!0;return"click"===l&&(o=!1!==t["ɵnov"](n,8).onClick(e)&&o),o}),r.S,r.c)),t["ɵdid"](7,49152,null,0,i.g,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{defaultHref:[0,"defaultHref"]},null),t["ɵdid"](8,16384,null,0,i.h,[[2,i.fb],i.Eb],{defaultHref:[0,"defaultHref"]},null),(n()(),t["ɵeld"](9,0,null,0,2,"ion-title",[["class","ion-text-center"]],null,null,null,r.Db,r.N)),t["ɵdid"](10,49152,null,0,i.xb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](-1,0,["Acceder"])),(n()(),t["ɵeld"](12,0,null,null,52,"ion-content",[["class","ion-padding"]],null,null,null,r.eb,r.o)),t["ɵdid"](13,49152,null,0,i.u,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](14,0,null,0,50,"ion-card",[["id","card"]],null,null,null,r.ab,r.g)),t["ɵdid"](15,49152,null,0,i.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](16,0,null,0,2,"ion-card-title",[],null,null,null,r.Z,r.k)),t["ɵdid"](17,49152,null,0,i.q,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵted"](-1,0,[" Iniciar sesión "])),(n()(),t["ɵeld"](19,0,null,0,45,"ion-card-content",[],null,null,null,r.W,r.h)),t["ɵdid"](20,49152,null,0,i.n,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](21,0,null,0,43,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(n,l,e){var o=!0,u=n.component;return"submit"===l&&(o=!1!==t["ɵnov"](n,23).onSubmit(e)&&o),"reset"===l&&(o=!1!==t["ɵnov"](n,23).onReset()&&o),"submit"===l&&(o=!1!==u.loginUser(e)&&o),o}),null,null)),t["ɵdid"](22,16384,null,0,a.s,[],null,null),t["ɵdid"](23,4210688,null,0,a.l,[[8,null],[8,null]],null,null),t["ɵprd"](2048,null,a.a,null,[a.l]),t["ɵdid"](25,16384,null,0,a.k,[[4,a.a]],null,null),(n()(),t["ɵeld"](26,0,null,null,38,"ion-grid",[],null,null,null,r.gb,r.q)),t["ɵdid"](27,49152,null,0,i.A,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](28,0,null,0,36,"ion-row",[["class","ion-justify-content-center"]],null,null,null,r.ub,r.E)),t["ɵdid"](29,49152,null,0,i.gb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](30,0,null,0,26,"ion-col",[["class","ion-align-self-center"],["size-lg","11"],["size-xs","12"]],null,null,null,r.db,r.n)),t["ɵdid"](31,49152,null,0,i.t,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](32,0,null,0,8,"ion-item",[["class","ion-padding-top"],["lines","none"]],null,null,null,r.lb,r.v)),t["ɵdid"](33,49152,null,0,i.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{lines:[0,"lines"]},null),(n()(),t["ɵeld"](34,0,null,0,6,"ion-input",[["class","inp"],["name","username"],["placeholder","Username"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var o=!0,u=n.component;return"ionBlur"===l&&(o=!1!==t["ɵnov"](n,35)._handleBlurEvent(e.target)&&o),"ionChange"===l&&(o=!1!==t["ɵnov"](n,35)._handleInputEvent(e.target)&&o),"ngModelChange"===l&&(o=!1!==(u.username=e)&&o),o}),r.kb,r.u)),t["ɵdid"](35,16384,null,0,i.Kb,[t.ElementRef],null,null),t["ɵprd"](1024,null,a.h,(function(n){return[n]}),[i.Kb]),t["ɵdid"](37,671744,null,0,a.m,[[2,a.a],[8,null],[8,null],[6,a.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["ɵprd"](2048,null,a.i,null,[a.m]),t["ɵdid"](39,16384,null,0,a.j,[[4,a.i]],null,null),t["ɵdid"](40,49152,null,0,i.G,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"],placeholder:[1,"placeholder"],type:[2,"type"]},null),(n()(),t["ɵeld"](41,0,null,0,8,"ion-item",[["class","ion-padding-top"],["lines","none"]],null,null,null,r.lb,r.v)),t["ɵdid"](42,49152,null,0,i.H,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{lines:[0,"lines"]},null),(n()(),t["ɵeld"](43,0,null,0,6,"ion-input",[["name","password"],["placeholder","Password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var o=!0,u=n.component;return"ionBlur"===l&&(o=!1!==t["ɵnov"](n,44)._handleBlurEvent(e.target)&&o),"ionChange"===l&&(o=!1!==t["ɵnov"](n,44)._handleInputEvent(e.target)&&o),"ngModelChange"===l&&(o=!1!==(u.password=e)&&o),o}),r.kb,r.u)),t["ɵdid"](44,16384,null,0,i.Kb,[t.ElementRef],null,null),t["ɵprd"](1024,null,a.h,(function(n){return[n]}),[i.Kb]),t["ɵdid"](46,671744,null,0,a.m,[[2,a.a],[8,null],[8,null],[6,a.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["ɵprd"](2048,null,a.i,null,[a.m]),t["ɵdid"](48,16384,null,0,a.j,[[4,a.i]],null,null),t["ɵdid"](49,49152,null,0,i.G,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"],placeholder:[1,"placeholder"],type:[2,"type"]},null),(n()(),t["ɵeld"](50,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["ɵeld"](51,0,null,0,5,"div",[],null,null,null,null,null)),(n()(),t["ɵeld"](52,0,null,null,4,"ion-row",[["class","ion-justify-content-center"]],null,null,null,r.ub,r.E)),t["ɵdid"](53,49152,null,0,i.gb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](54,0,null,0,2,"ion-button",[["size","large"],["type","submit"]],null,null,null,r.U,r.e)),t["ɵdid"](55,49152,null,0,i.k,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{size:[0,"size"],type:[1,"type"]},null),(n()(),t["ɵted"](-1,0,["Iniciar sesión"])),(n()(),t["ɵeld"](57,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["ɵeld"](58,0,null,0,0,"br",[],null,null,null,null,null)),(n()(),t["ɵeld"](59,0,null,0,5,"ion-row",[],null,null,null,r.ub,r.E)),t["ɵdid"](60,49152,null,0,i.gb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["ɵeld"](61,0,null,0,1,"button",[["class","btn loginface"],["id","boton"],["type","button"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.auth.login()&&t),t}),null,null)),(n()(),t["ɵted"](-1,null,["Inicia sesión con Facebook"])),(n()(),t["ɵeld"](63,0,null,0,1,"ion-icon",[["id","logo"],["name","logo-facebook"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.auth.login()&&t),t}),r.ib,r.s)),t["ɵdid"](64,49152,null,0,i.C,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{name:[0,"name"]},null)],(function(n,l){var e=l.component;n(l,1,0,""),n(l,7,0,"/home"),n(l,8,0,"/home"),n(l,33,0,"none"),n(l,37,0,"username",e.username),n(l,40,0,"username","Username","text"),n(l,42,0,"none"),n(l,46,0,"password",e.password),n(l,49,0,"password","Password","password"),n(l,55,0,"large","submit"),n(l,64,0,"logo-facebook")}),(function(n,l){n(l,21,0,t["ɵnov"](l,25).ngClassUntouched,t["ɵnov"](l,25).ngClassTouched,t["ɵnov"](l,25).ngClassPristine,t["ɵnov"](l,25).ngClassDirty,t["ɵnov"](l,25).ngClassValid,t["ɵnov"](l,25).ngClassInvalid,t["ɵnov"](l,25).ngClassPending),n(l,34,0,t["ɵnov"](l,39).ngClassUntouched,t["ɵnov"](l,39).ngClassTouched,t["ɵnov"](l,39).ngClassPristine,t["ɵnov"](l,39).ngClassDirty,t["ɵnov"](l,39).ngClassValid,t["ɵnov"](l,39).ngClassInvalid,t["ɵnov"](l,39).ngClassPending),n(l,43,0,t["ɵnov"](l,48).ngClassUntouched,t["ɵnov"](l,48).ngClassTouched,t["ɵnov"](l,48).ngClassPristine,t["ɵnov"](l,48).ngClassDirty,t["ɵnov"](l,48).ngClassValid,t["ɵnov"](l,48).ngClassInvalid,t["ɵnov"](l,48).ngClassPending)}))}function y(n){return t["ɵvid"](0,[(n()(),t["ɵeld"](0,0,null,null,1,"app-login",[],null,null,null,R,C)),t["ɵdid"](1,114688,null,0,m,[d.a,c.a,b.m,i.Lb,p.a,f.a,h.a,v.WrappedSocket],null,null)],(function(n,l){n(l,1,0)}),null)}var E=t["ɵccf"]("app-login",m,y,{},{},[]),w=e("Ip0R"),k=function(){return function(){}}();e.d(l,"LoginPageModuleNgFactory",(function(){return D}));var D=t["ɵcmf"](o,[],(function(n){return t["ɵmod"]([t["ɵmpd"](512,t.ComponentFactoryResolver,t["ɵCodegenComponentFactoryResolver"],[[8,[u.a,E]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["ɵmpd"](4608,w.m,w.l,[t.LOCALE_ID,[2,w.s]]),t["ɵmpd"](4608,a.q,a.q,[]),t["ɵmpd"](4608,i.b,i.b,[t.NgZone,t.ApplicationRef]),t["ɵmpd"](4608,i.Db,i.Db,[i.b,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](4608,i.Hb,i.Hb,[i.b,t.ComponentFactoryResolver,t.Injector]),t["ɵmpd"](1073742336,w.c,w.c,[]),t["ɵmpd"](1073742336,a.p,a.p,[]),t["ɵmpd"](1073742336,a.g,a.g,[]),t["ɵmpd"](1073742336,i.Bb,i.Bb,[]),t["ɵmpd"](1073742336,b.o,b.o,[[2,b.t],[2,b.m]]),t["ɵmpd"](1073742336,k,k,[]),t["ɵmpd"](1073742336,o,o,[]),t["ɵmpd"](1024,b.k,(function(){return[[{path:"",component:m}]]}),[])])}))}}]);