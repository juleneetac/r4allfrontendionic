<ion-app>

  <ion-header translucent>

    <ion-toolbar color="success">
      <ion-buttons slot="start">
        <ion-menu-button auto-hide="false"></ion-menu-button>
      </ion-buttons>
      
      <ion-buttons slot="end">
        <ion-button (click)="refreshDashboard()" size="large">
          <ion-icon slot="start" slot="icon-only" name="reload"></ion-icon>
        </ion-button>
      </ion-buttons>

      <ion-title class="ion-text-center">PÃ¡gina Principal</ion-title>
    </ion-toolbar>

  </ion-header>

  <ion-content>
    <ion-card>
      <ion-card-header>
        <ion-card-title class="ion-text-center">
          <ion-row class="ion-justify-content-center">
            <ion-chip color="primary">
              <ion-avatar>
                <img [src]="path+usuarioLogueado.rutaimagen">
              </ion-avatar>
              <ion-label>{{usuarioLogueado.username}}</ion-label>
            </ion-chip>
          </ion-row>
          <strong>Bienvenido de nuevo a Rackets4All</strong>
        </ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <ion-grid>
          <ion-row>
            <ion-col>
              <ion-card>
                <ion-card-header>
                  <ion-card-title>
                    Notificaciones y Chats
                  </ion-card-title>
                </ion-card-header>
              </ion-card>
            </ion-col>

            <ion-col>
              <ion-card>
                <ion-card-header>
                  <ion-card-title>
                    Tus Amigos
                  </ion-card-title>
                </ion-card-header>
              </ion-card>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-card>
                <ion-card-header><ion-card-title>Tus Partidos Activos</ion-card-title></ion-card-header>
                <ion-card-content>
                  <ion-list>
                      <ion-card *ngFor = "let partida of listaPartidas; let i = index">
                        <ion-card-header>Partido organizado por: <b>{{partida.organizador}}</b></ion-card-header>
                        <ion-card-content>
                          <h1><ion-badge color="secondary">{{partida.ubicacion}}</ion-badge></h1>
                          <ion-chip outline color="primary">
                            <ion-label *ngIf="partida.modo == 'i'">Individuales</ion-label>
                            <ion-label *ngIf="partida.modo == 'd'">Dobles</ion-label>
                          </ion-chip>
                          <ion-chip outline color="success" *ngIf="partida.ganador===undefined">
                            En Curso
                          </ion-chip>
                          <ion-chip outline color="warning" *ngIf="partida.ganador!==undefined">
                            Ganado por: {{partida.ganador}}
                          </ion-chip>

                          <!--ion-button fill="clear" color="success" size="large" (click)= "presentAlert(usuario)" *ngIf="this.usuarioLogueado.username !== usuario.username">
                          <ion-icon name="trophy-outline"></ion-icon>
                          </ion-button-->

                          <ion-list>
                            <ion-list-header>
                              <b>Participantes:</b>
                            </ion-list-header>
                            <ion-item>{{partida.organizador}}</ion-item>
                            <ion-item *ngFor="let invitado of partida.invitados" lines="none">
                              <ion-label>{{invitado}}</ion-label>
                            </ion-item>
                          </ion-list>

                          <ion-item *ngIf="partida.ganador===undefined">
                            <ion-label>Elegir Ganador</ion-label>
                            <ion-select [(ngModel)]="this.ganador" placeholder="Acabar Partida" (ionChange)="setGanador(i)">
                              <ion-select-option [value]=partida.organizador checked="false">{{partida.organizador}}</ion-select-option>
                              <ion-select-option *ngFor="let jugador of partida.invitados" [value]=jugador checked="false">{{jugador}}</ion-select-option>
                            </ion-select>
                          </ion-item>

                        </ion-card-content>
                      </ion-card>
                  </ion-list>
                </ion-card-content>
              </ion-card>
            </ion-col>
          </ion-row>

          <ion-row>
            <ion-col>
              <ion-card>
                <ion-card-header><ion-card-title>Tus Torneos Activos</ion-card-title></ion-card-header>
                <ion-card-content>
                    <ion-list>
                      <ion-card *ngFor = "let torneo of this.listaTorneosActivos">
                        <ion-card-header><b>{{torneo.nombre}}</b></ion-card-header>
                        <ion-card-content>
                          <ion-chip outline color="secondary">
                            <ion-label *ngIf="torneo.modo == 'i'">Individuales</ion-label>
                            <ion-label *ngIf="torneo.modo == 'd'">Dobles</ion-label>
                          </ion-chip>
                          <ion-chip outline color="tertiary">
                            <ion-label *ngIf="torneo.genero == 'm'">Masculino</ion-label>
                            <ion-label *ngIf="torneo.genero == 'f'">Femenino</ion-label>
                          </ion-chip>
                          <ion-chip outline color="primary">
                            <ion-label *ngIf="torneo.pistacubierta == true">Pista Cubierta</ion-label>
                            <ion-label *ngIf="torneo.pistacubierta == false">Pista Descubierta</ion-label>
                          </ion-chip>
                          <ion-chip outline color="success">
                            <ion-label>{{torneo.tipopista}}</ion-label>
                          </ion-chip>
                          <ion-chip outline color="warning">
                            <ion-label>Bola: {{torneo.tipobola}}</ion-label>
                          </ion-chip>
                          <br>
                          <br>
                          <ion-label>Premio: {{torneo.premio}}</ion-label>

                          <ion-list>
                            <ion-list-header><strong>Participantes:</strong></ion-list-header>
                            <div id="scroll">
                              <ion-item *ngFor="let participante of torneo.participantes">

                                  <!--ion-row>
                                    <ion-col size="auto"><ion-chip>{{participante.nombre}}</ion-chip></ion-col>
                                    <ion-col *ngIf="torneo.modo == 'd'" size="auto"><ion-chip>{{participante.pareja.nombre}}</ion-chip></ion-col>
                                    <ion-col size="auto">Ranking: {{participante.ranking}}</ion-col>
                                  </ion-row>
                                  <ion-row>
                                    <ion-col size="auto">Puntos: </ion-col>
                                    <ion-col size="auto"><ion-badge color="tertiary">{{participante.puntos}}</ion-badge></ion-col>
                                  </ion-row>
                                  <ion-row>
                                    <ion-col size="auto">Victorias: </ion-col>
                                    <ion-col size="auto"><ion-badge color="success">{{participante.victorias}}</ion-badge></ion-col>
                                  </ion-row>
                                  <ion-row>
                                    <ion-col size="auto">Derrotas: </ion-col>
                                    <ion-col size="auto"><ion-badge color="danger">{{participante.victorias}}</ion-badge></ion-col>
                                  </ion-row-->

                                  
                                  <ion-col size="2"><ion-chip>{{participante.nombre}}</ion-chip></ion-col>
                                  <ion-col *ngIf="torneo.modo == 'd'" size="2"><ion-chip>{{participante.pareja.nombre}}</ion-chip></ion-col>
                                  <ion-col size="2"><strong>Ranking: {{participante.ranking}}</strong></ion-col>

                                  <ion-col size="1">Puntos</ion-col>
                                  <ion-col size="1"><ion-badge color="tertiary">{{participante.puntos}}</ion-badge></ion-col>
                                  
                                  <ion-col size="1">Victorias</ion-col>
                                  <ion-col size="1"><ion-badge color="success">{{participante.victorias}}</ion-badge></ion-col>
                                  
                                  <ion-col size="1">Derrotas</ion-col>
                                  <ion-col size="1"><ion-badge color="danger">{{participante.victorias}}</ion-badge></ion-col>
                                  

                                  <!--tr>
                                    <th>Participante</th>
                                    <th *ngIf="torneo.modo == 'd'">Pareja</th>
                                    <th>Ranking</th>
                                    <th>Puntos</th>
                                    <th>Victorias</th>
                                    <th>Derrotas</th>
                                  </tr>
                                  <tr *ngFor="let participante of torneo.participantes">
                                    <th><ion-chip>{{participante.nombre}}</ion-chip></th>
                                    <th *ngIf="torneo.modo == 'd'"><ion-chip>{{participante.pareja.nombre}}</ion-chip></th>
                                    <th>{{participante.ranking}}</th>
                                    <th><ion-badge color="tertiary">{{participante.puntos}}</ion-badge></th>
                                    <th><ion-badge color="success">{{participante.victorias}}</ion-badge></th>
                                    <th><ion-badge color="danger">{{participante.victorias}}</ion-badge></th>
                                  </tr-->

                              </ion-item>
                            </div>
                          </ion-list>

                        </ion-card-content>
                      </ion-card>
                    </ion-list>

                </ion-card-content>
              </ion-card>
            </ion-col>
          </ion-row>

        </ion-grid>

      </ion-card-content>
    </ion-card>

  </ion-content>
</ion-app>
